@model MyTravelsVM
<link href="~/CSS/Style.css" rel="stylesheet" />
<script src="~/Scripts/canvasjs.min.js"></script>
<link href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css" rel="stylesheet" />

<div class="text-center">
    <br />
    <br />
    <i style="color:green; font-size: 12em" class="glyphicon glyphicon-tree-deciduous"></i>
    <i style="color:green; font-size: 15em" class="glyphicon glyphicon-tree-deciduous"></i>
    <i style="color:green; font-size: 10em" class="glyphicon glyphicon-tree-deciduous"></i>
    <i style="color:green; font-size: 20em" class="glyphicon glyphicon-tree-deciduous"></i>
    <i style="color:green; font-size: 10em" class="glyphicon glyphicon-tree-deciduous"></i>
    <i style="color:green; font-size: 5em" class="glyphicon glyphicon-tree-deciduous"></i>
    <i style="color:green; font-size: 15em" class="glyphicon glyphicon-tree-deciduous"></i>
</div>
<div>
    <h2 class="text-center">
        <br />
        <br />
        <p>You have polluted <br /></p>
        <label id="yourTotalCo2" style="color:red; font-size:300px">@Model.TotalCo2</label><br />
        <p style="color:red"> kg of Co2 </p>
        <br />
        <br />
        <p>You can reduce your carbon footprint by planting trees.</p>

        <p>To compensate for your emissions you need to plant<br /></p>
        <p><label id="amountOfTreesToCompensate" style="font-size:300px; color:green"></label></p>
        <p> trees per year. </p>
        <br />
        <br />
        <p>Your emissions of <label id="yourTotalCo3" style="color:red; font-size:50px">@Model.TotalCo2</label> kg is <label id="procentComparedToAverage" style="font-size:50px">%</label> of the total Co2 emissions</p>
        <p> per Capita and year, in Sweden.</p>
        <br />
        <br />
    </h2>
</div>
<br />
<br />
<br />
<br />

<div class="text-center">
    <button type="button" class="btn btn-default btn-lg seeMyTravelsBtn">See my travels</button> <button type="button" class="btn btn-default btn-lg seeMyTravelsBtn">See my funky stats</button>
</div>


<div class="container">
    <div class="row">

        <div class="col-md-6">

            <div id="chartContainer" style="height: 500px; width: 100%;"></div>
        </div>

        <div class="col-md-6">

            <div id="chartContainer2" style="height: 500px; width: 100%;"></div>

        </div>

        <div class="col-md-6">

            <div id="chartContainer3" style="height: 500px; width: 100%;"></div>

        </div>

    </div>

    <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Date</th>
                <th>From</th>
                <th>To</th>
                <th>Type</th>
                <th>Distance</th>
                <th>CO2</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
                <th>Date</th>
                <th>From</th>
                <th>To</th>
                <th>Type</th>
                <th>Distance</th>
                <th>CO2</th>
            </tr>
        </tfoot>
        <tbody>
            @foreach (var item in Model.TravelInfo)
            {
                <tr>
                    <td>@item.Date</td>
                    <td>@item.FromAddress</td>
                    <td>@item.ToAddress</td>
                    <td>@item.Transport</td>
                    <td>@item.Distance</td>
                    <td>@item.Co2</td>
                </tr>
            }
        </tbody>
    </table>
</div>
    <!--Load the AJAX API-->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">

      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
          ['Car', @Model.TravelsByCar],
          ['Bus', @Model.TravelsByBus],
          ['Motorcycle', @Model.TravelsByMotorcycle],
          ['Bicycle', @Model.TravelsByBicycling],
          ['Walking', @Model.TravelsByWalking]




        ]);

        // Set chart options
        var options = {'title':'Vehicle Type',
                       'width':1200,
                       'height':1000};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
</script>

<script>

    var totalCo2 = "@Model.TotalCo2";
    totalCo2 = totalCo2.replace(/,/g, '.');
    var personallEmission = Math.round(totalCo2 / 1000);
    document.getElementById("yourTotalCo2").innerHTML = personallEmission;
    document.getElementById("yourTotalCo3").innerHTML = personallEmission;

    //TREE CONVERTER

    var treeAmountToCompensate = Math.round(totalCo2/20000);
    document.getElementById("amountOfTreesToCompensate").innerHTML = treeAmountToCompensate;

    //CO2 COMPARED TO OTHERS

    var procentValue = Math.round(totalCo2/5500000);
    document.getElementById("procentComparedToAverage").innerHTML = procentValue + '%';
    if (procentValue > 100) {
        document.getElementById("procentComparedToAverage").setAttribute("style","color:red; font-size:50px");
    }
    else
    {
        document.getElementById("procentComparedToAverage").setAttribute("style","color:green; font-size:50px");
    }
</script>

<script type="text/javascript">

    window.onload = function () {
        var pieChart = new CanvasJS.Chart("chartContainer",
        {
            title: {
                text: "Your most popular vehicle choices"
            },
            animationEnabled: true,
            legend: {
                verticalAlign: "center",
                horizontalAlign: "left",
                fontSize: 20,
                fontFamily: "Helvetica"
            },
            theme: "theme2",
            data: [
            {
                type: "pie",
                indexLabelFontFamily: "Garamond",
                indexLabelFontSize: 20,
                indexLabel: "{label} {y}",
                startAngle: -20,
                showInLegend: true,
                toolTipContent: "{legendText} {y}",
                dataPoints: [
                    { y: @Model.TravelsByCar, legendText: "Car", label: "Car" },
                    { y: @Model.TravelsByTrain, legendText: "Train", label: "Train" },
                    { y: @Model.TravelsByBus, legendText: "Bus", label: "Bus" },
                    { y: @Model.TravelsByMotorcycle, legendText: "Motorcycle", label: "Motorcycle" },
                    { y: @Model.TravelsByBicycling, legendText: "Bicycle", label: "Bicycle" },
                  { y: @Model.TravelsByWalking, legendText: "Walking", label: "Walking" }
                ]
            }
            ]
        });

        pieChart.render();
        pieChart = {};

        var columnChart = new CanvasJS.Chart("chartContainer2",
  {
      title:{
          text: "Your emission values"
      },
      animationEnabled: true,
      axisY: {
          title: "Emissions"
      },
      legend: {
          verticalAlign: "bottom",
          horizontalAlign: "center"
      },
      theme: "theme2",
      data: [

      {
          type: "column",
          showInLegend: true,
          legendMarkerColor: "Green",
          legendText: "Values are shown in Kilos",
          dataPoints: [
          {y: Math.round(@(Model.Co2Max.Co2/1000)), label: "Highest emission"},
          {y: Math.round(@(Model.Co2Average/1000)),  label: "Average emission" },
          {y: @(Model.Co2Min.Co2/1000),  label: "Meadian emission"},
          {y: @(Model.Co2Min.Co2/1000), label: "Lowest emission"}
          ]
      }
      ]
  });

        columnChart.render();
        columnChart = {};

        var pieChartCities = new CanvasJS.Chart("chartContainer3",
{
    title: {
        text: "Most visited cities"
    },
    animationEnabled: true,
    legend: {
        verticalAlign: "center",
        horizontalAlign: "left",
        fontSize: 20,
        fontFamily: "Helvetica"
    },
    theme: "theme2",
    data: [
    {
        type: "pie",
        indexLabelFontFamily: "Garamond",
        indexLabelFontSize: 20,
        indexLabel: "{label} {y}",
        startAngle: -20,
        showInLegend: true,
        toolTipContent: "{legendText} {y}",
        dataPoints: [
            { y: @Model.CityStatistics[0].TimesVisited, legendText: "@Model.CityStatistics[0].CityName", label: "@Model.CityStatistics[0].CityName"},
            { y: @Model.CityStatistics[1].TimesVisited, legendText: "@Model.CityStatistics[1].CityName", label: "@Model.CityStatistics[1].CityName"},
            { y: @Model.CityStatistics[2].TimesVisited, legendText: "@Model.CityStatistics[2].CityName", label: "@Model.CityStatistics[2].CityName"},
            { y: @Model.CityStatistics[3].TimesVisited, legendText: "@Model.CityStatistics[3].CityName", label: "@Model.CityStatistics[3].CityName"},
            { y: @Model.CityStatistics[4].TimesVisited, legendText: "@Model.CityStatistics[4].CityName", label: "@Model.CityStatistics[4].CityName"},
            { y: @Model.CityStatistics[5].TimesVisited, legendText: "@Model.CityStatistics[5].CityName", label: "@Model.CityStatistics[5].CityName"}
        ]
    }
    ]
});

        pieChartCities.render();
        pieChartCities = {};
    }

</script>


@section Script{
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDbQKAwOCdTQ2xE8c5Nnxn4AkQYgAFhXUw&libraries=places"></script>
    <script src="~/Scripts/Map.js"></script>
    <script src="~/Scripts/Styling.js"></script>
    <script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/jquery.validate.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/mvc/5.2.3/jquery.validate.unobtrusive.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.3/js/bootstrapValidator.js"></script>
    <script src="~/Scripts/Login.js"></script>
    <script>checkIsLoggedIn()</script>
}


